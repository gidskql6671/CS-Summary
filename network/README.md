# 네트워크
## 네트워크의 물리적인 구조
- 단말(Node)과 그 단말을 이어주는 링크(Link)로 이루어져 있다.
- 단말(Node)는 종단 노드(End Node, Station)와 중계노드(Interconnecting Node)로 이루어져 있다.
- 종단 노드(End Node)는 통신의 양 끝단에 해당하는 노드로, 최초 송신 노드와 최종 수신 노드를 말한다.
    - 종단 노드는 그 환경에 따라 Terminal이나 Host가 될 수 있다.
- 중계 노드(Intermediate Node)는 종단노드 사이에서 패킷 중계를 해주는 노드이다.
    - Repeater, Hub, Bridge Switch, Router 등이 중계 노드에 해당한다.
- 링크(Link)는 노드 사이의 패킷을 전달하기 위한 물리적인 통신경로이다.
    - 링크는 특성에 따라 단방향(Simplex), 반이중(Half-Duplex), 전이중(Full-Duplex)로 나뉜다.
    - 단방향(Simplex) 통신은 **한쪽으로만 데이터**를 이동할 수 있다.
    - 반이중(Half-Duplex) 통신은 **양방향 통신이 가능하지만, 한번 이동시 한쪽으로만 이동**이 가능하다.
    - 전이중(Full-Duplex) 통신은 **양방향 전송**이 가능하다.

## OSI 7계층
네트워크 통신 프로토콜을 기능별로 7단계로 나눈 것이다.

![OSI 7계층](./images/OSI_7_계층.jpg)  
[해시넷 - OSI 7 계층](http://wiki.hash.kr/index.php?title=OSI_7_%EA%B3%84%EC%B8%B5&mobileaction=toggle_view_desktop)

### 작동 원리
데이터 전송시에는 상위 계층에서 하위 계층으로 캡슐화 처리를 하여 전송용 데이터를 만든다. 그리고 데이터를 수신하는 측에서는 하위 계층에서 상위 계층으로 역캡슐화 처리를 하여 해당 데이터를 사용한다.
최하위 계층인 물리계층에서는 비트(0, 1)의 신호로 표현된 데이터를 케이블이나 광섬유 등과 같은 물리적 전송매체를 통해 송신/수신한다.

캡슐화(Encapsulation)란 통신 상에서 상위 계층의 통신규약 정보를 헤더에 붙여서 하위 계층에 보내는 것을 의미한다. 역캡슐화(Decapsulation)는 캡슐화의 반대 개념으로, 헤더를 제거하여 상위 계층으로 보내는 것을 의미한다.

---
### 1계층: 물리 계층(Physical Layer)
물리 계층은 전기적, 기계적인 특성을 이용해 데이터를 전송하는 계층이다. 하드웨어적으로 물리적 매체를 통해 전기적 신호를 주고받으며, 데이터 전달의 역할을 할 뿐, 특정 알고리즘이나 오류제어 기능이 없다.

- 데이터 단위는 비트단위이다.
- 리피터, 랜선, 허브 등의 장비가 해당 계층에서 동작한다.

---
### 2계층: 데이터링크 계층(Data-Link Layer)
데이터링크 계층은 Point to Point간의 신뢰성 있는 정보 전송을 보장하기 위한 계층이다. 신뢰성 있는 정보 전송을 보장하기 위해 CRC 기반의 **오류 제어**와 **흐름 제어**가 필요하다. 네트워크 개체들간 데이터를 전달하고, 하위 계층인 물리 계층에서 발생할 수 있는 오류를 찾아낸다.  

주소값으로 **MAC Address**를 물리적으로 할당받고, 이 MAC 주소를 통해서 통신한다. Mac Address는 LAN카드가 만들어질 때부터 할당받는 고유 일련번호이다.

흐름 제어란 송신측이 수신측의 처리속도보다 더 빨리 데이터를 보내지 못하도록 제어해주는 것을 의미한다. 데이터 링크계층에서는 이를 위해 데이터 링크의 송수신 양단 간에 송신률 및 수신률의 균형을 맞춘다.  

에러 제어를 위해서 순환중복검사(CRC)와 같은 기법을 사용하여 에러를 검출하고, 정확하게 수신되지 않은 패킷들을 재전송한다.

- 이더넷, HDLC 등의 프로토콜이 있다.
- 데이터의 단위는 Frame이다.
- Switch, Bridge 등의 장비가 해당 계층에서 동작한다.

---
### 3계층: 네트워크 계층(Network Layer)
네트워크 계층은 중계 노드를 통하여 전송하는 경우 어떻게 중계할 것인가를 규정하는 계층이다. 라우팅, 흐름 제어, Segmentation, 오류 제어, Internetworking 등의 기능을 수행한다.

IP Segmentation은 큰 IP 패킷들을 적은 MTU(Maximum Transmission Unit)을 갖는 데이터 링크를 통하여 전송하기 위해 여러개의 작은 패킷으로 쪼개는 것을 의미한다. 

네트워크끼리의 연결을 Internetworking이라고 한다.

라우팅 기능은 전송 측에서 목적지까지 거쳐가는 최적의 경로를 선택하여 배정하는 기능이다. 라우팅 기능을 구현하기 위한 프로토콜이 여럿있는데, 사용하는 알고리즘에 따라 **거리 벡터형(Distance Vector), 링크 상태형(Link State**)으로 나눌 수 있다.  
거리 벡터형으로 가장 많이 사용되는 프로토콜은 RIP이 있다. RIP은 HOP을 단위로 사용하며, 이는 거치게되는 라우터 수를 의미한다. RIP은 주기적(30초)으로 모든 라우터에 정보를 업데이트(브로드캐스팅)한다. RIP은 구조가 간단하여 프로세서에 부담이 적다는 장점이 있다. 그러나 브로드캐스팅 방식이기에 네트워크 트래픽에 부하를 주고, 인터넷과 같이 HOP(단위)이 15가 넘어가는 큰 네트워크에서는 정상작동하지 않는다. 그렇기에 주로 학교나 회사 부서와 같은 소규모 네트워크에 적합하다.  
링크 상태형에는 OSPF가 있다. RIP이 대규모망 간의 라우팅에 비효율적이기에 이를 해결하기 위해 개발되어 인터넷에 적용된 프로토콜이다. RIP과 마찬가지로 HOP을 단위로 사용하며, 변경된 정보가 있을때만 브로드캐스팅으로 정보를 업데이트 한다. 또한 다익스트라 알고리즘을 사용하는 링크 상태 프로토콜이다. RIP과는 달리 인터넷과 같이 큰 망에서 사용이 가능하지만, 알고리즘이 복잡하여 프로세서에 부담을 주는 단점이 있다.

- IP, RIP, ARP, ICMP 등의 프로토콜을 사용한다.
- 데이터의 단위는 패킷(Packet)이다.
- 라우터(Router) 장비가 해당 계층에서 동작한다.
    - 라우터 장비를 통해서 경로를 설정하고, IP 주소(논리적인 주소)를 할당하여 통신을 관리할 수 있다.

---
### 4계층: 전송 계층(Transport Layer)
종단(End to End) 간의 신뢰성있고 정확한 데이터 전송을 담당하는 계층이다. 정보 전달을 두 호스트(host to host)간 보다는 프로세스(process to process)간의 통신으로 바꾸어 준다. 쉽게 설명하면 서버 프로그램과 클라이언트 프로그램의 통신으로 만들어준다고 생각하면 된다.

상위 계층으로 데이터를 전송하기 위해 Port 번호를 사용한다. 이 포트 번호를 통해 프로세스를 식별할 수 있다.

신뢰성있고 효율적인 데이터 전송을 위해 오류 검출 및 복구, 흐름 제어 등을 수행한다.

- TCP, UDP가 대표적인 프로토콜이다.
- 데이터의 단위는 TCP일 시 Segment, UDP일 시 Datagram이다.


---
### 5계층: 세션 계층(Session Layer)
세션 계층부터는 어플리케이션에 관련된 계층이라고 볼 수 있다. 각각의 네트워크로 연결되어 있을 수 있는 장비나 밑단의 클라이언트들의 세션을 관리하는 계층이다. 세션 계층은 통신 장치간 상호작용 및 동기화, 네트워크 오류 검사 및 복구 기능을 수행한다.  

어플리케이션 간에 통신을 하기위한 세션을 만들고, 유지하고, 중단하는 역할을 한다. 세션 계층은 프리젠테이션 계층 사이의 대화를 동기화시키며, 데이터 교환을 관리한다.

- NetBIOS, SSH 등의 프로토콜이 있다.
- 데이터의 단위는 메시지(message)이다.

---
### 6계층: 표현 계층(Presentation Layer)
표현 계층은 각각의 프로그램들이 서로 정보를 잘 통신할 수 있도록 데이터를 필터하고 변환하는 계층이다. 응용 계층으로부터 받은 데이터를 세션 계층이 다룰 수 있는 형태로 바꾸고, 반대로 세션 계층에서 받은 데이터를 응용 계층이 다룰 수 있는 형태로 바꾸어 전달하는 역할을 한다.

이 과정이 필요한 이유는 상위 계층인 응용 계층에서 사용하는 다양한 표현양식을 공통적인 전송형식으로 변환하여, 사용자들이 사용하는 데이터의 표현형식을 전송형식과 무관하게 사용할 수 있도록 해준다.  

표현 계층에서 수행하는 데이터 변환의 대표적인 것이 인코딩과 디코딩, 암호화이며, 데이터 압축과 같은 기능 역시 수행된다.  웹에서 파일을 전달하는데 쓰이는 MIME 인코딩 역시 표현 계층에서 수행된다.

- JPG, PNG 와 같은 데이터 형식들이 프로토콜이다.
- 데이터의 단위는 메시지(message)이다.

---
### 7계층: 응용 계층(Application Layer)
OSI 모델의 최상위 계층으로 응용 프로그램과 통신 계층 간의 인터페이스를 제공한다.  예를 들어 HTTP라는 응용계층 프로토콜은 응용 프로그램인 웹브라우저에게 필요한 데이터를 송수신할때 사용한다.

- HTTP, FTP, Telnet, DNS 등의 프로토콜이 있다.
- 데이터의 단위는 메시지(message)이다.